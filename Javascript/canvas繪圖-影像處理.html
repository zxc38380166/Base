<html>
<head>
<meta charset="utf-8"></meta>
<title>canvas繪圖-影像處理</title>
<script type="text/javascript">
var cvs, ctx;
 window.onload=function(){
   cvs=document.getElementById("cvs");  //取得document裡id名為cvs的標籤
   ctx=cvs.getContext("2d");            //取得cvs裡的物件並設定為2d繪圖
   var img=new image();                 //宣告img變成new Image(瀏覽器的影像標籤)
   img.src="123.jpg";                   //img.src為將圖片連結帶入img內
   img.onload=function(){               //img.onload為因為圖片還未載入時無法繪圖，故當圖片載入時執行以下函式
     ctx.drawImage(img, 0, 0, cvs.width, cvs.height);  //ctx.drawImage為將ctx(2d繪圖)套上drawImage屬性並利用參數設定圖片規格分別為(圖像標籤 ,x座標, y座標, 寬, 高)    
    } ;
}
function invertColor(){
 var pixels=ctx.getImageData(0, 0, cvs.width, cvs.height); //getImageData為取得ImageData物件(繪圖像素數據)
 var data=pixels.data;  //將data宣告為ImageData物件之下的data屬性，他是一個陣列存放所有像素資訊，1 個像素佔據 4 個資料(bytes)分別為 r(紅) , g(綠) , b(藍) , a(透明) {範圍為0~255}
 for(var i=0;i<data.length;i+=4){  //以下迴圈未搞懂 08/13 
   data[i]=255-data[i];
   data[i+1]=255-data[i+1];
   data[i+2]=255-data[i+2]; 
  } 
 ctx.putImageData(pixels, 0, 0);
}

</script>

<style type="text/css">
.cvs{
    border:1px solid #000000
}
</style>


</head>
<body>
  <div><button onclick="invertColor();">顏色的反轉</button></div>  <!--創建一個按鈕，點擊時啟動invertColor()函式-->>
  <canvas id="cvs" class="cvs" width="800" height="600"></canvas>
</body>
</html>